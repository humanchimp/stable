{"version":3,"file":"cli-impl.js","sources":["src/enums.ts","src/cli/ValidationError.ts","src/cli/Command.ts","src/cli/case/kebab.ts","src/cli/castValue.ts","src/cli/parseOptionValue.ts","src/cli/parseOption.ts","src/cli/Menu.ts","src/cli/Option.ts","src/cli/cli.ts","src/framework/partititionRangeForTotal.ts","src/framework/Selection.ts","src/framework/shuffleRng.ts","src/framework/shuffle.ts","src/cli/task/RunTask/runSuite.ts","src/cli/task/RunTask/Vconsole.ts","src/cli/task/RunTask/EndSignal.ts","src/cli/task/RunTask/implForSort.ts","src/cli/defaultValueForOption.ts","src/cli/task/RunTask/runners/local.ts","src/cli/task/RunTask/runners/eval.ts","src/cli/task/RunTask/runners/remote.ts","src/cli/task/RunTask/runners/chrome.ts","src/cli/task/RunTask/runners/jsdom.ts","src/cli/task/RunTask/implForRunner.ts","src/cli/output/formatReason.ts","src/cli/output/tapTransform.ts","src/cli/output/transformForFormat.ts","src/cli/stablerc/extensions.ts","src/cli/stablerc/isStablerc.ts","src/cli/stablerc/nearestStablerc.ts","src/cli/stablerc/stablercsForSpecs.ts","src/cli/loadModule.ts","src/cli/stablerc/instantiatePlugin.ts","src/cli/stablerc/instantiatePlugins.ts","src/cli/stablerc/StablercFile.ts","src/cli/stablerc/StablercChain.ts","src/cli/stablerc/getEntryfile.ts","src/cli/stablerc/directoryIncludeForFile.ts","src/cli/stablerc/stablercsForParams.ts","src/cli/task/BundleTask/writeBundle.ts","src/cli/task/RunTask/formatForRunner.ts","src/cli/verboseWarn.ts","src/cli/task/BundleTask/bundleFromFiles.ts","src/cli/task/BundleTask/importNameForPackageName.ts","src/cli/task/BundleTask/codeForPlugins.ts","src/cli/task/BundleTask/codeForTestBundle.ts","src/cli/bundlerAliasForRunner.ts","src/partition.ts","src/cli/task/BundleTask/thunkify.ts","src/cli/tripleSlashDirectives.ts","src/cli/readTripleSlashDirectives.ts","src/cli/Bundle.ts","src/cli/task/RunTask/skipped.ts","src/cli/task/RunTask/index.ts","src/cli/task/BundleTask/index.ts","src/cli/uniq.ts","src/cli/task/PrintConfigTask.ts","src/cli/task/PrintHelpMenuTask.ts","src/cli/entry.ts"],"sourcesContent":["export enum CliArgKey {\n  FILTER = \"filter\",\n  GREP = \"grep\",\n  RUNNER = \"runner\",\n  FORCE = \"force\",\n  OUTPUT_FORMAT = \"output-format\",\n  WORKING_DIRECTORY = \"working-directory\",\n  READ_STDIN = \"read-stdin\",\n  QUIET = \"quiet\",\n  VERBOSE = \"verbose\",\n  ORDERED = \"ordered\",\n  SORT = \"sort\",\n  HELP = \"help\",\n  ROLLUP = \"rollup\",\n  ONREADY = \"onready\",\n  BUNDLE_FILE = \"bundle-file\",\n  BUNDLE_FORMAT = \"bundle-format\",\n  SEED = \"seed\",\n  PARTITIONS = \"partitions\",\n  PARTITION = \"partition\",\n  SHARD = \"shard\",\n  PORT = \"port\",\n  HIDE_SKIPS = \"hide-skips\",\n  FAIL_FAST = \"fail-fast\",\n  HEADFUL = \"headful\",\n  COVERAGE = \"coverage\",\n  REST = \"rest\",\n  LIST_BY_SPEC = \"list-by-spec\",\n}\n\nexport enum CliCommandKey {\n  RUN = \"run\",\n  BUNDLE = \"bundle\",\n  CONFIG = \"config\",\n  HELP = \"help\",\n  PARSE_OPTIONS = \"parse-options\",\n}\n\nexport enum OptionType {\n  BOOLEAN = \"boolean\",\n  STRING = \"string\",\n  NUMBER = \"number\",\n  STRING_OR_BOOLEAN = \"string or boolean\",\n}\n\nexport enum ConfigOutputFormat {\n  YAML = \"yaml\",\n  JSON = \"json\",\n  INSPECT = \"inspect\",\n}\n\nexport enum StablercDetectionType {\n  INCLUDE = \"include\",\n  EXCLUDE = \"exclude\",\n  EXTENDS = \"extends\",\n}\n\nexport enum StreamFormat {\n  TAP = \"tap\",\n  JSONLINES = \"json\",\n  INSPECT = \"inspect\",\n}\n","import { Command, CommandParse } from \"../interfaces\";\nimport { CliArgs } from \"../types\";\n\nexport class ValidationError extends Error {\n  command: Command;\n\n  options: CliArgs;\n\n  rest: string[];\n\n  invalid: string[];\n\n  isDefault: boolean;\n\n  constructor(\n    message,\n    { command, options, rest, invalid, isDefault }: CommandParse,\n  ) {\n    super(message);\n    this.command = command;\n    this.options = options;\n    this.rest = rest;\n    this.invalid = invalid;\n    this.isDefault = isDefault;\n  }\n}\n","import {\n  Command as CommandInterface,\n  CommandParams,\n  Task,\n} from \"../interfaces\";\nimport { CliArgKey, CliCommandKey } from \"../enums\";\nimport { CliArgs } from \"../types\";\nimport { ValidationError } from \"./ValidationError\";\n\nexport const toleratedArgs = new Set<CliArgKey>([\n  CliArgKey.HELP,\n  CliArgKey.REST,\n]);\n\nexport class Command implements CommandInterface {\n  static toleratedArgs = toleratedArgs;\n\n  name: CliCommandKey;\n\n  args: Set<CliArgKey>;\n\n  help: string;\n\n  task: Task;\n\n  default: boolean;\n\n  emoji: string;\n\n  constructor({\n    name,\n    args,\n    help,\n    default: isDefault = false,\n    emoji,\n  }: CommandParams) {\n    this.name = name;\n    this.args = new Set<CliArgKey>(args);\n    this.help = help;\n    this.default = isDefault;\n    this.emoji = emoji;\n  }\n\n  validateOptions(options: CliArgs): void {\n    const invalidArgs = (Object.keys(options) as CliArgKey[])\n      .filter(option => !toleratedArgs.has(option))\n      .filter(option => !this.args.has(option));\n\n    if (invalidArgs.length > 0) {\n      throw new ValidationError(\n        `invalid arguments: ${invalidArgs.join(\", \")}`,\n        {\n          command: this,\n          invalid: invalidArgs,\n          options,\n          rest: [],\n        },\n      );\n    }\n  }\n}\n","export const KEBAB_REGEX = /[A-Z\\u00C0-\\u00D6\\u00D8-\\u00DE]/;\n\nexport const kebab = (str: string): string =>\n  [...str]\n    .reduce((memo, c: string, i) => {\n      const low = c.toLowerCase();\n\n      return `${memo}${KEBAB_REGEX.test(c) ? (i > 0 ? `-${low}` : low) : c}`;\n    }, \"\")\n    .replace(/\\s+/g, \"-\");\n","import { OptionType } from \"../enums\";\n\nexport function castValue(value, type): boolean | string | number {\n  switch (type) {\n    case OptionType.STRING:\n      return String(value);\n    case OptionType.BOOLEAN:\n      return toBoolean(value);\n    case OptionType.NUMBER:\n      return parseFloat(value);\n    case OptionType.STRING_OR_BOOLEAN: {\n      if (isBoolish(value)) {\n        return toBoolean(value);\n      }\n      return String(value);\n    }\n  }\n  throw new TypeError(`cannot cast to \"${type}\"!`);\n}\n\nexport function isBoolish(value) {\n  switch (value) {\n    case \"true\":\n    case \"yes\":\n    case \"on\":\n    case \"1\":\n    case \"false\":\n    case \"no\":\n    case \"off\":\n    case \"0\":\n    case \"\":\n      return true;\n  }\n}\n\nexport function toBoolean(value) {\n  switch (value) {\n    case \"true\":\n    case \"yes\":\n    case \"on\":\n    case \"1\":\n      return true;\n  }\n  return false;\n}\n","import { castValue } from \"./castValue\";\nimport { Option } from \"../interfaces\";\n\nexport function parseOptionValue(\n  option: Option,\n  value: string,\n): string | boolean | number {\n  return castValue(value, option.type);\n}\n","import { Option, OptionParse } from \"../interfaces\";\nimport { OptionType } from \"../enums\";\nimport { parseOptionValue } from \"./parseOptionValue\";\n\nexport function parseOption(option: Option, arg: string): OptionParse {\n  const { name, type } = option;\n  const isBoolean = type === OptionType.BOOLEAN;\n  const negated = isBoolean && /^--?no-/.test(arg);\n  const hasValue = negated || arg.includes(\"=\");\n  const [, value = negated ? \"off\" : undefined] = arg.split(\"=\");\n\n  return {\n    name,\n    option,\n    hasValue,\n    negated,\n    splat: hasValue\n      ? value.split(\",\").map(v => parseOptionValue(option, v))\n      : [],\n  };\n}\n","import {\n  Menu as MenuInterface,\n  MenuParams,\n  Command,\n  Option,\n  CommandParse,\n  Task,\n} from \"../interfaces\";\nimport { Command as SimpleCommand, toleratedArgs } from \"./Command\";\nimport { kebab } from \"./case/kebab\";\nimport { OptionType, CliArgKey, CliCommandKey } from \"../enums\";\nimport { ValidationError } from \"./ValidationError\";\nimport { parseOption } from \"./parseOption\";\nimport { parseOptionValue } from \"./parseOptionValue\";\nimport { CliArgs } from \"../types\";\n\nexport class Menu implements MenuInterface {\n  commands: Map<CliCommandKey, Command>;\n\n  options: Map<CliArgKey, Option>;\n\n  debug: boolean;\n\n  constructor({ commands, options, debug = false }: MenuParams) {\n    this.commands = this.makeMap<CliCommandKey, Command>(commands);\n    this.options = this.makeMap<CliArgKey, Option>(options);\n    this.debug = debug;\n\n    if (debug && !this.commands.has(CliCommandKey.PARSE_OPTIONS)) {\n      this.commands.set(\n        CliCommandKey.PARSE_OPTIONS,\n        new SimpleCommand({\n          name: CliCommandKey.PARSE_OPTIONS,\n          emoji: \"🥢\",\n          help: \"Parse argv; print result\",\n          args: [...this.options.keys()] as CliArgKey[],\n        }),\n      );\n    }\n  }\n\n  defaultCommand(): Command {\n    const command = [...this.commands.values()].find(cmd => cmd.default);\n\n    if (command == null) {\n      throw new TypeError(\"no default command\");\n    }\n    return command;\n  }\n\n  commandFromArgv(argv: string[]): CommandParse {\n    const options = Object.create(null);\n    const invalid = [];\n    const rest = [];\n\n    let currentOption: Option;\n    let command: Command;\n\n    for (const arg of argv) {\n      if (currentOption != null) {\n        if (!arg.startsWith(\"-\")) {\n          options[currentOption.name] = arg\n            .split(\",\")\n            .map(v => parseOptionValue(currentOption, v));\n          currentOption = undefined;\n          continue;\n        }\n        currentOption = undefined;\n      }\n      if (command == null) {\n        const cmd = this.detectCommand(arg);\n\n        if (cmd != null) {\n          command = cmd;\n          continue;\n        }\n      }\n      if (arg.startsWith(\"--\") || arg.startsWith(\"-\")) {\n        const option = this.detectOption(arg.split(\"=\")[0]);\n\n        if (option == null) {\n          if (arg.startsWith(\"--\")) {\n            invalid.push(arg);\n            continue;\n          }\n          // fallthrough!!!\n        } else {\n          const { name, splat, hasValue } = parseOption(option, arg);\n\n          if (options[name] == null) {\n            options[name] = [];\n          }\n          if (hasValue) {\n            options[name].push(...splat);\n          } else {\n            currentOption = option;\n          }\n          continue;\n        }\n      }\n      if (arg.startsWith(\"-\") && !arg.startsWith(\"--\")) {\n        const { lastValid } = arg\n          .slice(1)\n          .split(\"\")\n          .reduce(\n            (memo, f) => {\n              const flag = `-${f}`;\n              const option = this.detectOption(flag);\n\n              if (option == null) {\n                memo.lastValid = undefined;\n                invalid.push(flag);\n              } else if (option.type === OptionType.BOOLEAN) {\n                if (options[option.name] == null) {\n                  options[option.name] = [];\n                }\n                options[option.name].push(true);\n              }\n              memo.lastValid = option;\n              return memo;\n            },\n            { lastValid: undefined },\n          );\n\n        currentOption = lastValid != null ? lastValid : undefined;\n        continue;\n      }\n      rest.push(arg);\n    }\n    if (currentOption != null) {\n      if (options[currentOption.name] == null) {\n        options[currentOption.name] = [];\n      }\n      switch (currentOption.type) {\n        case OptionType.STRING_OR_BOOLEAN:\n        case OptionType.BOOLEAN: {\n          options[currentOption.name].push(true);\n          break;\n        }\n        case OptionType.STRING: {\n          options[currentOption.name].push(\"\");\n          break;\n        }\n        case OptionType.NUMBER: {\n          options[currentOption.name].push(0);\n        }\n      }\n      currentOption = undefined;\n    }\n\n    const isDefault = command == null;\n    const selectedCommand = isDefault ? this.defaultCommand() : command;\n\n    return {\n      command: selectedCommand,\n      isDefault,\n      options: this.compileOptions(options, selectedCommand),\n      invalid,\n      rest,\n    };\n  }\n\n  async runFromArgv(argv: string[], tasks: Map<string, Task>): Promise<void> {\n    const parsed = this.commandFromArgv(argv.slice(2));\n    const { options, rest, invalid } = parsed;\n    let { command }: { command: Command } = parsed;\n\n    if (invalid.length > 0) {\n      throw new ValidationError(\n        `unintelligible arguments: ${invalid.join(\", \")}`,\n        parsed,\n      );\n    }\n    // the task belonging to any option will run instead of the command's task, because\n    // options are finer-grained than commands. Concretely, `$ stable run -h` is equivalent\n    // to running `$ stable help`, and doesn't invoke `$ stable run` machinery at all.\n    for (const { command: commandName, name } of this.options.values()) {\n      if (options[name] && commandName != null) {\n        command = this.commands.get(commandName);\n      }\n    }\n\n    const mashup = {\n      // user-defined options\n      ...options,\n\n      // user-defined positional parameters (excluding invalid options)\n      rest,\n    };\n\n    await command.validateOptions(options);\n    await tasks.get(command.name).run(mashup, command, this);\n  }\n\n  private compileOptions(options: CliArgs, command: Command): CliArgs {\n    const flat: CliArgs = {};\n\n    for (const optionName of [...command.args, ...toleratedArgs]) {\n      const option = this.options.get(optionName);\n      const splat = [].concat(options[optionName] || []);\n      let sample: any;\n      let defaultValue: any;\n\n      if (option != null) {\n        // In this case we have an \"explicit\" option (not a merely tolarated one)\n        defaultValue = option.default;\n        sample =\n          option.sample != null\n            ? option.sample(splat)\n            : splat[splat.length - 1];\n\n        const value = sample === undefined ? defaultValue : sample;\n\n        flat[optionName] = value;\n\n        for (const [expanedOptionName, expandedValue] of option.expand(\n          value,\n          this,\n        )) {\n          flat[expanedOptionName] = expandedValue;\n        }\n      }\n    }\n    return flat;\n  }\n\n  private detectCommand(arg: string): Command {\n    return this.commands.get(kebab(arg) as CliCommandKey);\n  }\n\n  private detectOption(arg: string): Option {\n    const [, stripped] = arg.match(/^--?(?:no-)?(.*)/);\n    const candidate =\n      this.options.get(stripped as CliArgKey) ||\n      this.options.get(this.getAliases()[stripped]);\n\n    return candidate == null\n      ? undefined\n      : arg.startsWith(\"--no-\")\n      ? [OptionType.BOOLEAN, OptionType.STRING_OR_BOOLEAN].includes(\n          candidate.type,\n        )\n        ? candidate\n        : undefined\n      : candidate;\n  }\n\n  private getAliases(): {} {\n    return [...this.options.values()]\n      .filter(option => option.short != null)\n      .reduce((memo, { short, name }) => {\n        memo[short] = name;\n        return memo;\n      }, {});\n  }\n\n  private makeMap<T, T2 extends { name: T }>(list: T2[]): Map<T, T2> {\n    return new Map(list.map(t => [kebab(`${t.name}`) as any, t] as [T, T2]));\n  }\n}\n","import {\n  Option as OptionInterface,\n  OptionParams,\n  OptionSampler,\n  OptionExpander,\n  Menu,\n} from \"../interfaces\";\nimport { OptionType, CliCommandKey, CliArgKey } from \"../enums\";\n\nexport class Option implements OptionInterface {\n  name: CliArgKey;\n\n  short: string;\n\n  help: string;\n\n  type: OptionType;\n\n  default: any;\n\n  command: CliCommandKey;\n\n  sample: OptionSampler;\n\n  expander: OptionExpander;\n\n  constructor({\n    name,\n    short,\n    help,\n    type,\n    command,\n    sample,\n    default: defaultValue,\n    expand,\n  }: OptionParams) {\n    this.name = name;\n    this.short = short;\n    this.help = help;\n    this.type = type;\n    this.command = command;\n    this.sample = sample;\n    this.default = defaultValue;\n    this.expander = expand;\n  }\n\n  *expand(value: any, menu: Menu): IterableIterator<[CliArgKey, any]> {\n    if (this.expander != null) {\n      yield* this.expander(value, this, menu);\n    }\n  }\n}\n","import { CliArgKey, OptionType, CliCommandKey } from \"../enums\";\nimport { Menu } from \"./Menu\";\nimport { Command } from \"./Command\";\nimport { Option } from \"./Option\";\n\nexport const cli = new Menu({\n  debug: true,\n  commands: [\n    new Command({\n      name: CliCommandKey.RUN,\n      emoji: \"🐎\",\n      help: `If files are passed, start there, find .stablercs. If no files passed, start with the .stablerc in the pwd. Run every suite we find with the correct .stablerc.`,\n      args: [\n        CliArgKey.RUNNER,\n        CliArgKey.FORCE,\n        CliArgKey.PARTITION,\n        CliArgKey.PARTITIONS,\n        CliArgKey.SHARD,\n        CliArgKey.FILTER,\n        CliArgKey.GREP,\n        CliArgKey.SORT,\n        CliArgKey.ORDERED,\n        CliArgKey.OUTPUT_FORMAT,\n        CliArgKey.PORT,\n        CliArgKey.COVERAGE,\n        CliArgKey.HIDE_SKIPS,\n        CliArgKey.FAIL_FAST,\n        CliArgKey.HEADFUL,\n        CliArgKey.VERBOSE,\n        CliArgKey.QUIET,\n      ],\n      default: true,\n    }),\n    new Command({\n      name: CliCommandKey.BUNDLE,\n      emoji: \"📦\",\n      help: `Produce bundle artifacts, but don't run any tests.`,\n      args: [\n        CliArgKey.PARTITION,\n        CliArgKey.PARTITIONS,\n        CliArgKey.OUTPUT_FORMAT,\n        CliArgKey.ROLLUP,\n        CliArgKey.ONREADY,\n        CliArgKey.COVERAGE,\n        CliArgKey.HIDE_SKIPS,\n        CliArgKey.VERBOSE,\n        CliArgKey.QUIET,\n      ],\n    }),\n    new Command({\n      name: CliCommandKey.CONFIG,\n      emoji: \"⚙️\",\n      help: `Print the config to stdout after performing the algorithm to load it relative to the given path, else the pwd. Stream the reports to stdout`,\n      args: [\n        CliArgKey.OUTPUT_FORMAT,\n        CliArgKey.WORKING_DIRECTORY,\n        CliArgKey.VERBOSE,\n      ],\n    }),\n    new Command({\n      name: CliCommandKey.HELP,\n      emoji: \"🙃\",\n      help: `Print this message.`,\n      args: [],\n    }),\n  ],\n  options: [\n    new Option({\n      name: CliArgKey.READ_STDIN,\n      help: \"read stdin.\",\n      type: OptionType.BOOLEAN,\n      default: false,\n    }),\n    new Option({\n      name: CliArgKey.FILTER,\n      short: \"f\",\n      help: \"a substring match to filter by suite description.\",\n      type: OptionType.STRING,\n    }),\n    new Option({\n      name: CliArgKey.GREP,\n      short: \"g\",\n      help:\n        \"a JavaScript regular expression to use for filtering by suite description.\",\n      type: OptionType.STRING,\n    }),\n    new Option({\n      name: CliArgKey.RUNNER,\n      short: \"r\",\n      help: \"the runner to use.\",\n      type: OptionType.STRING,\n    }),\n    new Option({\n      name: CliArgKey.FORCE,\n      help:\n        \"force the use of the specified runner even against conflicting directives\",\n      type: OptionType.BOOLEAN,\n    }),\n    new Option({\n      name: CliArgKey.OUTPUT_FORMAT,\n      short: \"o\",\n      help: \"the format of the output stream.\",\n      type: OptionType.STRING,\n    }),\n    new Option({\n      name: CliArgKey.SORT,\n      help:\n        \"the sort algorithm used when visiting the specs. By default, specs are shuffled using the Fisher-Yates algorithm. You can defeat this feature by passing --sort=ordered.\",\n      type: OptionType.STRING,\n      default: \"shuffle\",\n    }),\n    new Option({\n      name: CliArgKey.ORDERED,\n      help: \"a convenient shorthand for --sort=ordered.\",\n      type: OptionType.BOOLEAN,\n      default: undefined,\n      *expand(value) {\n        if (value === true) {\n          yield [CliArgKey.SORT, \"ordered\"];\n        }\n      },\n    }),\n    new Option({\n      name: CliArgKey.PARTITIONS,\n      help: \"the total of partitions to divide the specs by.\",\n      type: OptionType.NUMBER,\n      default: undefined,\n    }),\n    new Option({\n      name: CliArgKey.PARTITION,\n      help: \"the partition to run and report.\",\n      type: OptionType.NUMBER,\n      default: undefined,\n    }),\n    new Option({\n      name: CliArgKey.SHARD,\n      help: \"a shorthand notation of partition/partitions.\",\n      type: OptionType.STRING,\n      default: undefined,\n      *expand(value) {\n        if (value !== undefined) {\n          const [partitionInput, partitionsInput] = value.split(\"/\");\n\n          const partition = parseInt(partitionInput, 10);\n          const partitions = parseInt(partitionsInput, 10);\n\n          if (Number.isNaN(partition) || Number.isNaN(partitions)) {\n            throw new TypeError(\n              \"partition and partitions should both be numbers\",\n            );\n          }\n          if (partition <= 0 || partitions <= 0 || partition > partitions) {\n            throw new RangeError(\n              \"partition must be a positive number less than or equal to partitions\",\n            );\n          }\n          yield [CliArgKey.PARTITION, partition];\n          yield [CliArgKey.PARTITIONS, partitions];\n        }\n      },\n    }),\n    new Option({\n      name: CliArgKey.SEED,\n      help:\n        \"for seeding the random number generator used by the built-in shuffle algorithm.\",\n      type: OptionType.STRING,\n      default: undefined,\n    }),\n    new Option({\n      name: CliArgKey.ROLLUP,\n      help: \"path to the rollup config for your project.\",\n      type: OptionType.STRING,\n      default: \"rollup.config.js\",\n    }),\n    new Option({\n      name: CliArgKey.ONREADY,\n      help: 'the name of a function to call when \"ready\".',\n      type: OptionType.STRING,\n      default: \"run\",\n    }),\n    new Option({\n      name: CliArgKey.BUNDLE_FILE,\n      help:\n        \"the name of the file of the output bundle. if we end up with multiple bundles, we'll start numbering them\",\n      type: OptionType.STRING,\n      default: \"bundle.js\",\n    }),\n    new Option({\n      name: CliArgKey.BUNDLE_FORMAT,\n      help: \"the format of the outpout bundle\",\n      type: OptionType.STRING,\n      default: \"iife\",\n    }),\n    new Option({\n      name: CliArgKey.COVERAGE,\n      help: \"unclear what function this serves at this point\",\n      type: OptionType.STRING_OR_BOOLEAN,\n      default: Object.keys(process.env).some(it => it.startsWith(\"NYC_\"))\n        ? \"lcov\"\n        : false,\n    }),\n    new Option({\n      name: CliArgKey.HIDE_SKIPS,\n      help: \"hide skipped specs from the stream.\",\n      type: OptionType.STRING_OR_BOOLEAN,\n      default: \"focus\",\n    }),\n    new Option({\n      name: CliArgKey.FAIL_FAST,\n      help: \"exit immediately when something is not ok\",\n      type: OptionType.BOOLEAN,\n      default: true,\n    }),\n    new Option({\n      name: CliArgKey.PORT,\n      help: \"the port to listen on whenever stable needs an http server.\",\n      type: OptionType.NUMBER,\n      default: 10001,\n    }),\n    new Option({\n      name: CliArgKey.HEADFUL,\n      help: \"run the user agent headfully\",\n      type: OptionType.BOOLEAN,\n      default: false,\n    }),\n    new Option({\n      name: CliArgKey.VERBOSE,\n      short: \"v\",\n      help: \"be chattier.\",\n      type: OptionType.BOOLEAN,\n      default: false,\n    }),\n    new Option({\n      name: CliArgKey.QUIET,\n      short: \"q\",\n      help: \"don't send an exit code on failure.\",\n      type: OptionType.BOOLEAN,\n      default: false,\n    }),\n    new Option({\n      name: CliArgKey.WORKING_DIRECTORY,\n      help: \"a path to use instead of the pwd.\",\n      type: OptionType.STRING,\n      default: process.cwd(),\n    }),\n    new Option({\n      name: CliArgKey.HELP,\n      short: \"h\",\n      help: \"print this message.\",\n      type: OptionType.BOOLEAN,\n      default: false,\n      command: CliCommandKey.HELP,\n    }),\n  ],\n});\n","import { Range } from \"../interfaces\";\n\nexport function partitionRangeForTotal(\n  total: number,\n  partition: number,\n  partitions: number,\n): Range {\n  const sizes = Array(partitions).fill(0);\n\n  for (let i = 0; i < total; i++) {\n    sizes[i % partitions]++;\n  }\n\n  const start = sizes\n    .slice(0, partition)\n    .reduce((memo, size) => memo + size, 0);\n  const end = start + sizes[partition];\n\n  return { start, end };\n}\n","import {\n  ISelection,\n  SelectionParams,\n  JobPredicate,\n  Job,\n} from \"../interfaces\";\nimport { partitionRangeForTotal } from \"./partititionRangeForTotal\";\n\nconst { assign } = Object;\n\nexport class Selection implements ISelection {\n  grep: RegExp;\n\n  filter: string;\n\n  constructor(options?: SelectionParams) {\n    assign(this, options);\n    if (typeof this.grep === \"string\") {\n      this.grep = new RegExp(this.grep); // no escaping\n    }\n  }\n\n  predicate: JobPredicate = ({ suite, spec }: Job) => {\n    const candidate = suite.prefixed(spec.description);\n\n    if (this.grep != null && !this.grep.test(candidate)) {\n      return false;\n    }\n    if (this.filter != null && !candidate.includes(this.filter)) {\n      return false;\n    }\n    return true;\n  };\n\n  partition(\n    total: number,\n    partition: number,\n    partitions: number,\n  ): JobPredicate {\n    if (partition >= partitions) {\n      throw new RangeError(\"partition must be less than partitions\");\n    }\n    const { start, end } = partitionRangeForTotal(total, partition, partitions);\n\n    return job => {\n      const { series: current } = job;\n\n      if (current < start || current >= end) {\n        return false;\n      }\n      return this.predicate(job);\n    };\n  }\n}\n","// The Fisher-Yates shuffle.\n// Lovingly forked from a nice blog post by Mike Bostock.\n// Recommended reading: https://bost.ocks.org/mike/shuffle/\n\nfunction shuffleRng(rng) {\n  return function shuffle(array) {\n    let w = array.length;\n\n    // While there remain elements to shuffle…\n    while (w) {\n      // Pick a remaining element…\n      const o = Math.floor(rng() * w--);\n\n      // And swap it with the current element.\n      [array[w], array[o]] = [array[o], array[w]];\n    }\n    return array;\n  };\n}\n\nexport { shuffleRng };\n","import { shuffleRng } from \"./shuffleRng\";\nimport { Sorter } from \"../interfaces\";\n\ninterface Shuffle extends Sorter {\n  rng: (rng: () => number) => Sorter;\n}\n\nconst shuffle: Shuffle = shuffleRng(Math.random) as Shuffle;\n\nshuffle.rng = shuffleRng;\n\nexport { shuffle };\n","import { ISuite, Sorter } from \"../../../interfaces\";\nimport { Message } from \"../../../types\";\nimport { Selection } from \"../../../framework/lib\";\n\nexport async function* runSuite(\n  suite: ISuite,\n  selection: Selection,\n  sorter: Sorter,\n  failFast: boolean,\n): AsyncIterableIterator<Message> {\n  for await (const report of suite.run(sorter, selection.predicate)) {\n    yield report;\n    if (\"ok\" in report && report.ok === false && failFast) {\n      return;\n    }\n  }\n}\n","import { ISuite } from \"../../../interfaces\";\n\nexport const virtualMethods = [\n  \"assert\",\n  \"clear\",\n  \"log\",\n  \"warn\",\n  \"error\",\n  \"count\",\n  \"countReset\",\n  \"debug\",\n  \"dir\",\n  \"dirxml\",\n  \"exception\",\n  \"group\",\n  \"groupCollapsed\",\n  \"groupEnd\",\n  \"markTimeline\",\n  \"profile\",\n  \"profileEnd\",\n  \"info\",\n  \"table\",\n  \"time\",\n  \"timeEnd\",\n  \"timeStamp\",\n  \"timeline\",\n  \"timelineEnd\",\n  \"timeLog\",\n  \"trace\",\n];\n\ninterface Sender {\n  (...rest: any[]): void;\n}\n\nexport function wrapConsole(baseConsole: Console, send: Sender) {\n  return virtualMethods.reduce((memo, method) => {\n    memo[method] = virtual(method);\n    return memo;\n  }, Object.create(baseConsole));\n\n  function virtual(method) {\n    return (...rest) => {\n      try {\n        send(method, rest);\n      } catch (_) {\n        // drop it while it's hawwwwwt\n      }\n    };\n  }\n}\n\nexport function setupVconsole(suite: ISuite, send: Sender): ISuite {\n  let originalConsole;\n\n  /* eslint-disable no-global-assign */\n  return suite\n    .beforeAll(() => {\n      originalConsole = console;\n      console = wrapConsole(originalConsole, send);\n    })\n    .afterAll(() => {\n      console = originalConsole;\n    });\n  /* eslint-enable no-global-assign */\n}\n\nexport class Vconsole implements Console {\n  private backingConsole: Console;\n\n  private listeners: Set<any>;\n\n  get Console() {\n    return this.backingConsole.Console;\n  }\n\n  get memory() {\n    return this.backingConsole.memory;\n  }\n\n  log = (...rest) => {\n    this.method(\"log\", rest);\n  };\n\n  error = (...rest) => {\n    this.method(\"error\", rest);\n  };\n\n  warn = (...rest) => {\n    this.method(\"warn\", rest);\n  };\n\n  info = (...rest) => {\n    this.method(\"info\", rest);\n  };\n\n  assert = (...rest) => {\n    this.method(\"assert\", rest);\n  };\n\n  clear = (...rest) => {\n    this.method(\"clear\", rest);\n  };\n\n  count = (...rest) => {\n    this.method(\"count\", rest);\n  };\n\n  countReset = (...rest) => {\n    this.method(\"countReset\", rest);\n  };\n\n  debug = (...rest) => {\n    this.method(\"debug\", rest);\n  };\n\n  dir = (...rest) => {\n    this.method(\"dir\", rest);\n  };\n\n  dirxml = (...rest) => {\n    this.method(\"dirxml\", rest);\n  };\n\n  exception = (...rest) => {\n    this.method(\"exception\", rest);\n  };\n\n  group = (...rest) => {\n    this.method(\"group\", rest);\n  };\n\n  groupCollapsed = (...rest) => {\n    this.method(\"groupCollapsed\", rest);\n  };\n\n  groupEnd = (...rest) => {\n    this.method(\"groupEnd\", rest);\n  };\n\n  markTimeline = (...rest) => {\n    this.method(\"markTimeline\", rest);\n  };\n\n  profile = (...rest) => {\n    this.method(\"profile\", rest);\n  };\n\n  profileEnd = (...rest) => {\n    this.method(\"profileEnd\", rest);\n  };\n\n  table = (...rest) => {\n    this.method(\"table\", rest);\n  };\n\n  time = (...rest) => {\n    this.method(\"time\", rest);\n  };\n\n  timeLog = (...rest) => {\n    this.method(\"timeLog\", rest);\n  };\n\n  timeEnd = (...rest) => {\n    this.method(\"timeEnd\", rest);\n  };\n\n  timeStamp = (...rest) => {\n    this.method(\"timeStamp\", rest);\n  };\n\n  timeline = (...rest) => {\n    this.method(\"timeline\", rest);\n  };\n\n  timelineEnd = (...rest) => {\n    this.method(\"timelineEnd\", rest);\n  };\n\n  trace = (...rest) => {\n    this.method(\"trace\", rest);\n  };\n\n  constructor(backingConsole: Console) {\n    this.backingConsole = backingConsole;\n    this.listeners = new Set();\n  }\n\n  addListener(eventName, listener) {\n    this.assertMessageEvent(eventName);\n    this.listeners.add(listener);\n  }\n\n  removeListener(eventName, listener) {\n    this.assertMessageEvent(eventName);\n    this.listeners.delete(listener);\n  }\n\n  private method(methodName, args) {\n    this.listeners.forEach(listener => {\n      listener({ console: { method: methodName, arguments: args } });\n    });\n  }\n\n  private assertMessageEvent(eventName) {\n    if (eventName !== \"message\") {\n      throw new Error(`unknown event name: ${eventName}`);\n    }\n  }\n}\n","export class EndSignal {\n  __end__ = true;\n}\n","import { shuffle } from \"../../../framework/shuffle\";\nimport { Sorter } from \"../../../interfaces\";\n\nexport function implForSort(sort: string): Sorter {\n  switch (sort) {\n    case \"shuffle\":\n      return shuffle;\n  }\n  return it => it;\n}\n","import { CliArgKey } from \"../enums\";\nimport { cli } from \"./cli\";\n\nexport function defaultValueForOption(optionName: CliArgKey, value: any): any {\n  const option = cli.options.get(optionName);\n\n  return option === undefined\n    ? value\n    : value === undefined\n    ? option.default\n    : value;\n}\n","import { ISuite, RunTaskParams } from \"../../../../interfaces\";\nimport { of, Stream, fromEvent } from \"most\";\nimport { fromAsyncIterable } from \"most-async-iterable\";\nimport { runSuite } from \"../runSuite\";\nimport { Vconsole } from \"../Vconsole\";\nimport { Message } from \"../../../../types\";\nimport { EndSignal } from \"../EndSignal\";\nimport { Selection } from \"../../../../framework/lib\";\nimport { CliArgKey } from \"../../../../enums\";\nimport { implForSort } from \"../implForSort\";\nimport { defaultValueForOption } from \"../../../defaultValueForOption\";\n\nexport function run(\n  thunk,\n  {\n    [CliArgKey.FILTER]: filter,\n    [CliArgKey.GREP]: grep,\n    [CliArgKey.SORT]: sort,\n    [CliArgKey.FAIL_FAST]: failFast,\n  }: RunTaskParams,\n): Stream<Message> {\n  const selection = new Selection({\n    filter,\n    grep: grep && new RegExp(grep),\n  });\n  const sorter = implForSort(sort);\n  const vconsole = new Vconsole(console);\n\n  return of(thunk(vconsole))\n    .await()\n    .chain((suite: ISuite) => {\n      const end = new EndSignal();\n      const reports = (fromAsyncIterable(\n        runSuite(\n          suite,\n          selection,\n          sorter,\n          defaultValueForOption(CliArgKey.FAIL_FAST, failFast),\n        ),\n      ) as Stream<Message | EndSignal>)\n        .continueWith(() => of(end))\n        .multicast();\n\n      return reports\n        .filter(it => it !== end)\n        .merge(\n          fromEvent<Message>(\"message\", vconsole).takeUntil(\n            reports.filter(it => it === end),\n          ),\n        )\n        .map(report => ({ ...report, suite })) as Stream<Message>;\n    });\n}\n","import { Stream } from \"most\";\nimport { run as runLocal } from \"./local\";\n\nexport function run(code, options): Stream<any> {\n  return runLocal(\n    console =>\n      new Promise(resolve => {\n        new Function(\"require\", \"stableRun\", \"console\", \"__dirname\", code)(\n          require,\n          resolve,\n          console,\n          __dirname,\n        );\n      }),\n    options,\n  );\n}\n","import { spawn } from \"child_process\";\nimport { createServer } from \"http\";\nimport { fromEvent, Stream } from \"most\";\nimport express from \"express\";\nimport { Server as WebSocketServer, WebSocket } from \"ws\";\nimport { RunTaskParams } from \"../../../../interfaces\";\nimport { Message } from \"../../../../types\";\nimport { CliArgKey } from \"../../../../enums\";\nimport { defaultValueForOption } from \"../../../defaultValueForOption\";\n\ninterface WebSocketMessage {\n  data: string;\n}\n\nexport function run(\n  code: string,\n  spawnParams,\n  params: RunTaskParams,\n): Stream<Message> {\n  const { [CliArgKey.PORT]: port, [CliArgKey.VERBOSE]: verbose } = params;\n  const server = createServer();\n  const app = express();\n\n  app.get(\"/\", (_, res) => {\n    res.send(`<!doctype html>\n<html>\n  <head>\n    <title>stable</title>\n  </head>\n  <body>\n    <!-- TODO: during bootstrapping, I'm hardcoding chai and sinon dependencies -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/sinon.js/7.2.2/sinon.js\"></script>\n    <script src=\"./bundle.js\"></script>\n  </body>\n</html>\n`);\n  });\n\n  app.get(\"/bundle.js\", (_, res) => {\n    res.setHeader(\"Content-type\", \"text/javascript\");\n    res.send(code);\n  });\n\n  const wss = new WebSocketServer({ server });\n  let browser;\n\n  server.on(\"request\", app);\n\n  start();\n\n  function start() {\n    const url = new URL(`http://0.0.0.0:${port}`);\n\n    url.search = `${new URLSearchParams(Object.entries(params)\n      .map(([key, value]: [CliArgKey, any]) => [\n        key,\n        defaultValueForOption(key, value),\n      ])\n      .filter(([, value]) => value != null) as [string, string][])}`;\n\n    server.listen(port, () => {\n      if (verbose) {\n        console.log(`server listening at ${url.origin}`); // eslint-disable-line\n      }\n      const [proc, args] = spawnParams(url);\n\n      browser = spawn(proc, [...args, `${url}`]);\n    });\n  }\n\n  function stop() {\n    browser.kill();\n    server.close();\n  }\n\n  return fromEvent<[WebSocket]>(\"connection\", wss)\n    .take(1)\n    .chain(([ws]: [WebSocket]) =>\n      fromEvent<WebSocketMessage>(\"message\", ws).takeUntil(\n        fromEvent(\"close\", ws).tap(stop),\n      ),\n    )\n    .map(({ data }: WebSocketMessage) => data)\n    .map(JSON.parse)\n    .filter(payload => {\n      if (\"message\" in payload) {\n        const { __coverage__: coverage } = payload.message;\n\n        if (coverage != null) {\n          global[\"__coverage__\"] = coverage;\n          return false;\n        }\n      }\n      return true;\n    })\n    .map(it => it.message);\n}\n","import { run as runRemote } from \"./remote\";\nimport { RunTaskParams } from \"../../../../interfaces\";\nimport { CliArgKey } from \"../../../../enums\";\n\nexport function run(code, params: RunTaskParams) {\n  return runRemote(\n    code,\n    () => {\n      const remoteDebuggingPortFlag = \"--remote-debugging-port=9222\";\n\n      return [\n        chromePathForPlatform(),\n        params[CliArgKey.HEADFUL]\n          ? [remoteDebuggingPortFlag]\n          : [\"--headless\", remoteDebuggingPortFlag],\n      ];\n    },\n    params,\n  );\n}\n\nexport function chromePathForPlatform() {\n  switch (process.platform) {\n    case \"darwin\":\n      return \"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome\";\n    case \"linux\":\n      return \"/usr/bin/google-chrome\"; // This is gonna be way too naive\n  }\n  throw new Error(\"Sorry, your platform is not currently supported.\");\n}\n","import { run as runLocal } from \"./local\";\nimport { JSDOM } from \"jsdom\";\nimport { Stream } from \"most\";\n\nexport function run(code, options): Stream<any> {\n  return runLocal(\n    console =>\n      new Promise(resolve => {\n        new JSDOM(\n          `<!doctype html>\n<html>\n  <head>\n    <title>stable</title>\n  </head>\n  <body>\n    <!-- TODO: during bootstrapping, I'm hardcoding chai and sinon dependencies -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/sinon.js/7.2.2/sinon.js\"></script>\n    <script>${code}</script>\n  </body>\n</html>\n`,\n          {\n            runScripts: \"dangerously\",\n            resources: \"usable\",\n            beforeParse(window) {\n              window.console = console;\n              window.stableRun = resolve;\n            },\n          },\n        );\n      }),\n    options,\n  );\n}\n","import { TestRun } from \"../../../interfaces\";\nimport { kebab } from \"../../case/kebab\";\nimport { run as evalRunner } from \"./runners/eval\";\nimport { run as chromeRunner } from \"./runners/chrome\";\nimport { run as jsdomRunner } from \"./runners/jsdom\";\n\nexport function implForRunner(runner): TestRun {\n  switch (kebab(runner)) {\n    case \"eval\":\n    case \"vm\": // This is cheating for now\n    case \"isolate\": // More cheating\n      return evalRunner;\n    case \"chrome\":\n      return chromeRunner;\n    case \"jsdom\":\n      return jsdomRunner;\n  }\n  throw new Error(`unknown runner type: \"${runner}\"`);\n}\n","export function formatReason(reason) {\n  return reason && reason.stack\n    ? `\n\n${reason.stack\n  .split(\"\\n\")\n  .map(line => `    ${line}`)\n  .join(\"\\n\")}\n`\n    : \"\";\n}\n","import { formatReason } from \"./formatReason\";\nimport { inspect } from \"util\";\n\nexport function tapTransform() {\n  let count = 0;\n\n  return ({\n    ok,\n    description,\n    reason,\n    skipped,\n    planned,\n    completed,\n    userAgent,\n    console,\n  }) => {\n    if (planned != null) {\n      if (completed == null) {\n        return `1..${planned}`;\n      }\n      return `\n# ok ${ok}${\n        ok !== completed\n          ? `\n# failed ${completed - ok}`\n          : \"\"\n      }${\n        skipped !== 0\n          ? `\n# skipped ${skipped}`\n          : \"\"\n      }${\n        userAgent != null\n          ? `\n# user agent: ${userAgent}`\n          : \"\"\n      }\n`;\n    }\n    if (console != null) {\n      return `\\t${console.method.toUpperCase()}: ${inspect(console.arguments, {\n        colors: true,\n      })}`;\n    }\n    return `${ok ? \"\" : \"not \"}ok ${++count} ${description}${\n      !ok ? formatReason(reason) : \"\"\n    }${skipped ? \" # SKIP\" : \"\"}`;\n  };\n}\n","import { inspect } from \"util\";\nimport { tapTransform } from \"./tapTransform\";\n\nexport function transformForFormat(format) {\n  switch (format) {\n    case \"inspect\":\n      return it => inspect(it, { colors: true });\n    case \"json\":\n    case \"jsonlines\":\n      return JSON.stringify;\n    case \"tap\":\n      return tapTransform();\n  }\n  throw new Error(`unsupported format: -f ${format}`);\n}\n","export const extensions = [\".yaml\", \".yml\", \".json\", \"\"];\n","import { extensions } from \"./extensions\";\n\nexport function isStablerc(entry: string): boolean {\n  return extensions.some(extension => entry.endsWith(`.stablerc${extension}`));\n}\n","import { stat } from \"fs-extra\";\nimport { dirname, join } from \"path\";\nimport { isStablerc } from \"./isStablerc\";\nimport { extensions } from \"./extensions\";\n\nexport async function nearestStablerc(dir: string): Promise<string> {\n  do {\n    for (const candidate of [\n      ...(isStablerc(dir) ? [dir] : []),\n      ...extensions.map(extension => join(dir, `.stablerc${extension}`)),\n    ]) {\n      try {\n        await stat(candidate);\n        return candidate;\n      } catch (_) {\n        // hard pass\n      }\n    }\n  } while (dir !== \"/\" && (dir = dirname(dir)));\n}\n","import { StablercMatch } from \"../../interfaces\";\nimport { load } from \"./StablercChain\";\nimport { nearestStablerc } from \"./nearestStablerc\";\nimport { dirname } from \"path\";\n\nexport async function stablercsForSpecs(\n  specfiles: string[],\n): Promise<Map<string, StablercMatch>> {\n  const byStablerc = new Map<string, StablercMatch>();\n  const byDir = new Map<string, string>();\n\n  for (const specfile of specfiles) {\n    const dir = dirname(specfile);\n    const filename = await (async () => {\n      if (byDir.has(dir)) {\n        return byDir.get(dir);\n      }\n      const filename = await nearestStablerc(dir);\n\n      byDir.set(dirname(filename), filename);\n      return filename;\n    })();\n\n    if (byStablerc.has(filename)) {\n      const entry = byStablerc.get(filename);\n\n      entry.files.push(specfile);\n    } else {\n      const chain = await load(filename);\n      const config = chain.flat();\n\n      byStablerc.set(filename, {\n        config,\n        files: [specfile],\n      });\n    }\n  }\n  return byStablerc;\n}\n","import { rollup, RollupOutput } from \"rollup\";\nimport { isAbsolute } from \"path\";\nimport nodeResolve from \"rollup-plugin-node-resolve\";\nimport commonjs from \"rollup-plugin-commonjs\";\n\ninterface _CompileHaver {\n  _compile(code: string, filename: string): void;\n}\n\nexport async function loadModule(input) {\n  const bundle = await rollup({\n    input,\n    external: id => {\n      return (\n        (id[0] !== \".\" && !isAbsolute(id)) ||\n        id.slice(-5, id.length) === \".json\"\n      );\n    },\n    plugins: [\n      nodeResolve({\n        extensions: Object.keys(require.extensions),\n      }),\n      commonjs(),\n    ],\n  });\n  const {\n    output: [{ code }],\n  }: RollupOutput = await bundle.generate({ format: \"cjs\" });\n\n  // temporarily override require 💅\n  const defaultLoader = require.extensions[\".js\"];\n\n  require.extensions[\".js\"] = (module, filename) => {\n    if (filename === input) {\n      ((module as any) as _CompileHaver)._compile(code, filename);\n    } else {\n      defaultLoader(module, filename);\n    }\n  };\n\n  delete require.cache[input];\n\n  const loadedModule = await require(input);\n\n  require.extensions[\".js\"] = defaultLoader;\n\n  return loadedModule;\n}\n","import { StablercPlugin } from \"../../interfaces\";\nimport { async as glob } from \"fast-glob\";\nimport { createFilter } from \"rollup-pluginutils\";\nimport { loadModule } from \"../loadModule\";\n\nexport async function instantiatePlugin(\n  pluginName,\n  baseConfig,\n): Promise<StablercPlugin> {\n  const { [pluginName]: thunk } = await loadModule(\n    require.resolve(`@topl/stable-plugin-${pluginName}`),\n  );\n  const files =\n    baseConfig && baseConfig.include != null\n      ? (await glob(baseConfig.include, { cwd: __dirname })).filter(\n          createFilter(\"**\", baseConfig.exclude),\n        )\n      : [];\n  const config = { ...baseConfig, files };\n  const plugin = await thunk(config);\n\n  return {\n    config,\n    plugin,\n    rollupPlugins:\n      (plugin.provides &&\n        plugin.provides.plugins &&\n        plugin.provides.plugins()) ||\n      [],\n  };\n}\n","import { StablercPlugin } from \"../../interfaces\";\nimport { instantiatePlugin } from \"./instantiatePlugin\";\n\nexport async function instantiatePlugins(\n  filename: string,\n  map: Map<string, any>,\n): Promise<Map<string, StablercPlugin>> {\n  const instances = new Map();\n\n  // TODO: support external plugins. I have definite plans for this, but I'm not ready to work on it yet.\n  for (const [pluginName, config] of map.entries()) {\n    instances.set(pluginName, await instantiatePlugin(pluginName, config));\n  }\n  return instances;\n}\n","import {\n  StablercDocument,\n  StablercFileLoadParams,\n  StablercFileParams,\n  StablercFile as StablercFileInterface,\n  StablercPlugin,\n} from \"../../interfaces\";\nimport { async as glob } from \"fast-glob\";\nimport { readFile } from \"fs-extra\";\nimport { safeLoad } from \"js-yaml\";\nimport { join, dirname, isAbsolute } from \"path\";\nimport { nearestStablerc } from \"./nearestStablerc\";\nimport { stablercsForSpecs } from \"./stablercsForSpecs\";\nimport { instantiatePlugins } from \"./instantiatePlugins\";\nimport { Splat } from \"../../types\";\n\nexport class StablercFile implements StablercFileInterface {\n  static nearest = nearestStablerc;\n\n  static forSpecs = stablercsForSpecs;\n\n  static splatDocument = splatDocument;\n\n  static load = load;\n\n  static loadAll = loadAll;\n\n  filename: string;\n\n  document: StablercDocument;\n\n  plugins: boolean;\n\n  loadedPlugins: Promise<Map<any, StablercPlugin>>;\n\n  constructor({\n    document,\n    filename = \"\",\n    plugins = false,\n  }: StablercFileParams) {\n    this.filename = filename;\n    this.document = splatDocument(document);\n    if (plugins) {\n      this.loadedPlugins = instantiatePlugins(\n        this.filename,\n        new Map(document.plugins),\n      );\n    }\n    this.plugins = plugins;\n  }\n\n  withPlugins() {\n    return this.plugins\n      ? this\n      : new StablercFile({\n          filename: this.filename,\n          document: this.document,\n          plugins: true,\n        });\n  }\n}\n\nexport function splatDocument(document: any) {\n  return {\n    extends: splat(document.extends),\n    include: splat(document.include),\n    exclude: splat(document.exclude),\n    plugins: document.plugins,\n    runners: document.runners,\n  };\n  function splat(it) {\n    return it ? [].concat(it) : [];\n  }\n}\n\nexport async function load(\n  filename: string,\n  { plugins: shouldLoadPlugins = false }: StablercFileLoadParams = {},\n): Promise<StablercFile> {\n  const contents = await readFile(filename, \"utf-8\");\n  const data = safeLoad(contents);\n\n  return new StablercFile({\n    filename,\n    document: {\n      extends: data.extends,\n      include: data.include,\n      exclude: data.exclude,\n      plugins: data.plugins,\n      runners: data.runners,\n    },\n    plugins: shouldLoadPlugins,\n  });\n}\n\nexport function loadAll(\n  filename: string,\n  params?: StablercFileLoadParams,\n): Promise<Map<string, StablercFile>>;\nexport function loadAll(\n  filename: string[],\n  params?: StablercFileLoadParams,\n): Promise<Map<string, StablercFile>>;\nexport async function loadAll(\n  filename: Splat<string>,\n  params: StablercFileLoadParams = {},\n): Promise<Map<string, StablercFile>> {\n  const stablercs: Map<string, StablercFile> = new Map();\n  let [current, ...moar]: string[] = [].concat(filename);\n\n  do {\n    if (stablercs.has(current)) {\n      continue;\n    }\n    const stablerc: StablercFile = await load(current, {\n      ...params,\n      plugins: false,\n    });\n    const { document } = stablerc;\n\n    const [extend, include] = await Promise.all([\n      moarFiles(current, document.extends),\n      moarFiles(current, document.include),\n    ]);\n\n    await Promise.all(\n      [include, extend].map(source => appendMoar(moar, source)),\n    );\n\n    stablercs.set(current, stablerc);\n  } while ((current = moar.pop()));\n\n  return stablercs;\n}\n\nasync function* moarFiles(relative, patterns) {\n  const cwd = dirname(relative);\n\n  for (const filename of await glob<string>(patterns, { cwd })) {\n    yield await nearestStablerc(\n      isAbsolute(filename) ? filename : join(cwd, filename),\n    );\n  }\n}\n\nasync function appendMoar(\n  moar: string[],\n  source: AsyncIterableIterator<string>,\n) {\n  for await (const filename of source) {\n    moar.push(filename);\n  }\n}\n","import {\n  StablercFileLoadParams,\n  StablercChain as StablercChainInterface,\n  StablercEntry,\n  StablercChainParams,\n  StablercFile,\n  StablercDocument,\n} from \"../../interfaces\";\nimport { Splat } from \"../../types\";\nimport { StablercFile as SimpleStablercFile } from \"./StablercFile\";\nimport { isAbsolute, join, dirname } from \"path\";\n\nexport class StablercChain implements StablercChainInterface {\n  static loadAll = loadAll;\n\n  static load = load;\n\n  inheritance: StablercEntry[] = [];\n\n  plugins: boolean;\n\n  constructor({ inheritance, plugins = false }: StablercChainParams = {}) {\n    this.inheritance = inheritance;\n    this.plugins = plugins;\n  }\n\n  flat(): StablercFile {\n    const [{ filename }] = this.inheritance;\n\n    return new SimpleStablercFile({\n      filename,\n      document: this.inheritance.reduce(\n        (memo: StablercDocument, { filename: f, file: { document } }) => {\n          for (const key of [\"include\", \"exclude\", \"runners\", \"plugins\"]) {\n            memo[key] = [].concat(memo[key], document[key]).filter(Boolean);\n          }\n          memo.plugins = memo.plugins.map(\n            ([pluginName, config]) =>\n              [\n                pluginName,\n                config && {\n                  ...config,\n                  ...(config.include\n                    ? {\n                        include: []\n                          .concat(config.include)\n                          .map(include =>\n                            isAbsolute(include)\n                              ? include\n                              : join(\n                                  dirname(\n                                    isAbsolute(f) ? f : join(__dirname, f),\n                                  ),\n                                  include,\n                                ),\n                          ),\n                      }\n                    : {}),\n                },\n              ].filter(Boolean) as [string, any],\n          );\n          return memo;\n        },\n        {},\n      ),\n      plugins: false,\n    });\n  }\n}\n\nexport async function loadAll(\n  filename: Splat<string>,\n  params?: StablercFileLoadParams,\n): Promise<Map<string, StablercChain>> {\n  const files: Map<string, StablercFile> = await SimpleStablercFile.loadAll(\n    [].concat(filename),\n    params,\n  );\n\n  return new Map(\n    await Promise.all(\n      [...files.entries()].map(\n        async ([filename]) =>\n          [filename, await load(filename, params, files)] as [\n            string,\n            StablercChain\n          ],\n      ),\n    ),\n  );\n}\n\nexport async function load(\n  filename: string,\n  params: StablercFileLoadParams = {},\n  files?: Map<string, StablercFile>,\n): Promise<StablercChain> {\n  if (files == null) {\n    files = await SimpleStablercFile.loadAll(filename, params);\n  }\n\n  return new StablercChain({\n    inheritance: [...inheritance(filename, files)],\n    plugins: params.plugins,\n  });\n}\n\nfunction* inheritance(\n  filename: string,\n  files: Map<string, StablercFile>,\n): IterableIterator<StablercEntry> {\n  const file = files.get(filename);\n\n  yield { filename, file };\n\n  for (const parentFilename of file.document.extends.map(path =>\n    isAbsolute(path) ? path : join(dirname(filename), path),\n  )) {\n    yield* inheritance(parentFilename, files);\n  }\n}\n","import { stat } from \"fs-extra\";\nimport { dirname } from \"path\";\nimport { nearestStablerc } from \"./nearestStablerc\";\nimport { isStablerc } from \"./isStablerc\";\n\nexport async function getEntryfile(entry?: string): Promise<string> {\n  const explicit = isStablerc(entry);\n\n  // Calling stat early so that we consistently throw on non-existent directories\n  const stats = await stat(explicit ? dirname(entry) : entry);\n\n  if (explicit) {\n    return entry;\n  }\n  if (stats.isDirectory()) {\n    return nearestStablerc(entry);\n  }\n  return nearestStablerc(dirname(entry));\n}\n","import { resolve, dirname } from \"path\";\nimport { stat } from \"fs-extra\";\n\nexport async function directoryIncludeForFile(file: string): Promise<string> {\n  const stats = await stat(file);\n\n  return resolve(stats.isDirectory() ? file : dirname(file), \"**\");\n}\n","import { async as glob } from \"fast-glob\";\nimport { stat } from \"fs-extra\";\nimport { createFilter } from \"rollup-pluginutils\";\nimport { resolve } from \"path\";\nimport { StablercTaskParams, StablercMatch } from \"../../interfaces\";\nimport { StablercChain } from \"./StablercChain\";\nimport { stablercsForSpecs } from \"./stablercsForSpecs\";\nimport { CliArgKey } from \"../../enums\";\nimport { getEntryfile } from \"./getEntryfile\";\nimport { directoryIncludeForFile } from \"./directoryIncludeForFile\";\nimport { isStablerc } from \"./isStablerc\";\n\nexport async function stablercsForParams({\n  [CliArgKey.WORKING_DIRECTORY]: cwd = process.cwd(),\n  [CliArgKey.REST]: explicitFiles,\n}: StablercTaskParams): Promise<Map<string, StablercMatch>> {\n  const specfiles = [];\n\n  if (explicitFiles.length === 0) {\n    explicitFiles.push(\".\");\n  }\n  for (const file of explicitFiles.map(file => resolve(cwd, file))) {\n    const stats = await stat(file);\n\n    if (!stats.isDirectory() && !isStablerc(file)) {\n      specfiles.push(file);\n      continue;\n    }\n\n    const entryfile = await getEntryfile(file);\n    const chain = await StablercChain.load(entryfile, {\n      plugins: false,\n      cwd,\n    });\n    const { document: entry } = chain.flat();\n    const [batch, include] = await Promise.all([\n      glob(entry.include, { cwd, absolute: true }),\n      directoryIncludeForFile(file),\n    ]);\n\n    specfiles.push(...batch.filter(createFilter(include, entry.exclude)));\n  }\n  return stablercsForSpecs(specfiles);\n}\n","import { join, basename } from \"path\";\nimport sorcery from \"sorcery\";\nimport { BundleTaskParams } from \"../../../interfaces\";\nimport { CliArgKey } from \"../../../enums\";\n\nexport async function writeBundle(\n  bundle,\n  filename,\n  {\n    [CliArgKey.BUNDLE_FORMAT]: bundleFormat = \"iife\",\n    [CliArgKey.VERBOSE]: verbose = false,\n  }: BundleTaskParams,\n): Promise<void> {\n  await bundle.write({\n    file: filename,\n    format: bundleFormat,\n    sourcemap: \"inline\",\n    globals: {\n      sinon: \"sinon\",\n      chai: \"chai\",\n    },\n    sourcemapPathTransform(path) {\n      return join(__dirname, \"../..\", basename(path));\n    },\n  });\n\n  const chain = await sorcery.load(filename);\n\n  await chain.write();\n  if (verbose) {\n    console.log(`bundle written: ${filename}`); // eslint-disable-line\n  }\n}\n","import { kebab } from \"../../case/kebab\";\nimport { ModuleFormat } from \"rollup\";\n\nexport function formatForRunner(runner: string): ModuleFormat {\n  switch (kebab(runner)) {\n    case \"remote\":\n    case \"chrome\":\n    case \"jsdom\":\n      return \"iife\";\n  }\n  return \"cjs\";\n}\n","export function verboseWarn(warning: any) {\n  console.warn(warning.message); // eslint-disable-line\n}\n","import { rollup, RollupBuild } from \"rollup\";\nimport { isAbsolute } from \"path\";\nimport { readFile } from \"fs-extra\";\nimport babel from \"@babel/core\";\nimport multiEntry from \"rollup-plugin-multi-entry\";\nimport babelPluginIstanbul from \"babel-plugin-istanbul\";\nimport { verboseWarn } from \"../../verboseWarn\";\nimport { StablercPlugin, LoadedPlugins } from \"../../../interfaces\";\n\nexport async function bundleFromFiles({\n  files,\n  rollupPlugins,\n  pluginsPromise,\n  shouldInstrument,\n  verbose,\n}: {\n  files: string[];\n  rollupPlugins: any[];\n  pluginsPromise: Promise<LoadedPlugins>;\n  shouldInstrument: boolean;\n  verbose: boolean;\n}): Promise<RollupBuild> {\n  const stablePlugins: StablercPlugin[] = await Promise.all(\n    (await pluginsPromise).plugins.values(),\n  );\n\n  const plugins = [\n    ...rollupPlugins,\n    ...stablePlugins.flatMap(it => it.rollupPlugins),\n  ];\n\n  return rollup({\n    input: files,\n    onwarn: verbose ? verboseWarn : () => {},\n    external(id) {\n      if ([\"tslib\"].includes(id)) {\n        return false;\n      }\n      if (\n        (id[0] !== \".\" && !isAbsolute(id)) ||\n        id.slice(-5, id.length) === \".json\"\n      ) {\n        return plugins.every(\n          plugin => plugin.resolveId == null || plugin.resolveId(id) == null,\n        );\n      }\n      return false;\n    },\n    plugins: [\n      ...plugins,\n      ...(shouldInstrument\n        ? [\n            {\n              name: \"stable-instrument\",\n              async transform(code, id) {\n                if (files.includes(id) || id[0] === \"\\x00\") {\n                  return;\n                }\n\n                let currentCode = await readFile(id, \"utf-8\");\n                let currentMap = null;\n\n                for (const { transform } of plugins.filter(\n                  plugin => plugin.transform != null,\n                )) {\n                  const result = await transform(currentCode, id);\n\n                  if (result == null) {\n                    break;\n                  }\n\n                  ({ map: currentMap, code: currentCode } = result);\n                }\n                return babel.transform(code, {\n                  filename: id,\n                  sourceMaps: \"inline\",\n                  plugins: [\n                    [\n                      babelPluginIstanbul,\n                      {\n                        include: [\"src/**/*\"],\n                        inputSourceMap: currentMap,\n                      },\n                    ],\n                  ],\n                });\n              },\n            },\n          ]\n        : []),\n      multiEntry(),\n    ],\n  });\n}\n","export function importNameForPackageName(packageName) {\n  const conventionalSlug = \"stable-plugin-\";\n\n  if (!packageName.includes(conventionalSlug)) {\n    throw new Error(\"plugin doesn't support the convention\");\n  }\n  return packageName.slice(\n    packageName.indexOf(conventionalSlug) + conventionalSlug.length,\n  );\n}\n","import { join } from \"path\";\nimport { importNameForPackageName } from \"./importNameForPackageName\";\nimport { StablercPlugin } from \"../../../interfaces\";\n\nexport function codeForPlugins(plugins: StablercPlugin[]): string {\n  const listenerModules = plugins\n    .map(({ plugin }) => plugin)\n    .filter(plugin => plugin.provides && plugin.provides.listeners)\n    .map(plugin => ({\n      exportName: importNameForPackageName(plugin.package.name),\n      path: join(plugin.package.name, plugin.provides.listeners),\n      config: plugin.config,\n    }));\n\n  const listenerBundle = `import { plugins as convert } from './stable';\n${listenerModules\n  .map(\n    ({ exportName, path }) =>\n      `import * as ${exportName}_raw from ${JSON.stringify(\n        require.resolve(path),\n      )};`,\n  )\n  .join(\"\\n\")}\n${listenerModules\n  .map(({ exportName, config }) => {\n    const importName = `${exportName}_raw`;\n    const jsonConfig = JSON.stringify(config);\n\n    // Shoehorn-in the config... This is pretty gross\n    return `const ${exportName} = {\n  pending: ${importName}.pending && ${importName}.pending.bind(null, ${jsonConfig}),\n  complete: ${importName}.complete && ${importName}.complete.bind(null, ${jsonConfig})\n};`;\n  })\n  .join(\"\\n\")}\nconst plugins = convert({${listenerModules.map(m => m.exportName).join(\",\")}});\nexport { plugins };\n`;\n\n  return listenerBundle;\n}\n","export function codeForTestBundle(onready, cardinality = 0, specialRunner) {\n  const indexes = [...range(cardinality)];\n\n  return `import { dethunk } from \"./stable\";${\n    onready == null\n      ? `\nimport { run } from \"${specialRunner == null ? \"./stable\" : \"./run\"}\";\n`\n      : \"\"\n  }\n${indexes\n  .map(\n    i => `import { plugins as plugins${i} } from \"./plugins-${i}\";\nimport { thunk as thunk${i} } from \"./bundle-${i}\";`,\n  )\n  .join(\"\\n\")}\nPromise.all([\n  ${indexes.map(i => `dethunk(thunk${i}, plugins${i})`).join(\",\\n  \")}\n])\n  .then(suites => suites.reduce((a, b) => a.concat(b)))\n  .then(${onready || \"run\"});\n`;\n}\n\nfunction* range(to: number): IterableIterator<number> {\n  for (let i = 0; i < to; i++) {\n    yield i;\n  }\n}\n","export function bundlerAliasForRunner(runner: string) {\n  switch (runner) {\n    case \"remote\":\n    case \"chrome\":\n      return \"remote\";\n  }\n}\n","export function partition(collection, predicate) {\n  return collection.reduce(\n    (memo, candidate) => {\n      memo[predicate(candidate) ? 0 : 1].push(candidate);\n      return memo;\n    },\n    [[], []],\n  );\n}\n","import babel from \"@babel/core\";\nimport traverse from \"@babel/traverse\";\nimport generate from \"@babel/generator\";\nimport t from \"@babel/types\";\nimport { partition } from \"../../../partition\";\n\nconst names = [\n  \"describe\",\n  \"xdescribe\",\n  \"fdescribe\",\n  \"describeEach\",\n  \"xdescribeEach\",\n  \"fdescribeEach\",\n  \"it\",\n  \"xit\",\n  \"fit\",\n  \"beforeAll\",\n  \"afterAll\",\n  \"beforeEach\",\n  \"afterEach\",\n  \"info\",\n];\n\nexport function thunkify({ files }) {\n  return {\n    name: \"stable-thunkify\",\n    transform(code, filename) {\n      if (!files.some(file => filename === file)) {\n        return;\n      }\n      const ast = babel.parse(code, { filename });\n\n      traverse(ast, {\n        Program(path) {\n          const [imports, rest] = partition(path.node.body, node =>\n            [\"ImportDeclaration\"].includes(node.type),\n          );\n          if (rest.length > 1 || !t.isExportNamedDeclaration(rest[0])) {\n            path.replaceWith(\n              t.program([\n                ...imports,\n                t.exportNamedDeclaration(\n                  t.functionDeclaration(\n                    t.identifier(\"thunk\"),\n                    names.map(name => t.identifier(name)),\n                    t.blockStatement(rest),\n                  ),\n                  [],\n                ),\n              ]),\n            );\n          }\n        },\n      });\n\n      return generate(\n        ast,\n        { sourceMaps: true, sourceFileName: filename },\n        code,\n      );\n    },\n  };\n}\n","export const runnerDirectiveRegex = /^(\\/\\/\\/\\s*<stable\\s+runner\\s*=\\s*)('|\")(.+?)\\2.*?\\/>/;\n","import { createReadStream } from \"fs\";\nimport { runnerDirectiveRegex } from \"./tripleSlashDirectives\";\n\ninterface Directive {\n  runner?: string;\n}\n\nexport async function* readTripleSlashDirectives(\n  file: string,\n): AsyncIterableIterator<Directive> {\n  for await (const chunk of createReadStream(file, {\n    encoding: \"utf-8\",\n    highWaterMark: 1024,\n  })) {\n    lines: for (const line of chunk.split(\"\\n\")) {\n      if (!line.startsWith(\"///\") && line.trim() !== \"\") {\n        return;\n      }\n      const m = line.match(runnerDirectiveRegex);\n\n      if (m == null) {\n        continue lines;\n      }\n      const [, , , runner] = m;\n\n      yield { runner };\n    }\n  }\n}\n","import { join } from \"path\";\nimport { RollupBuild, rollup } from \"rollup\";\nimport { writeFile, copy } from \"fs-extra\";\nimport { dir } from \"tmp-promise\";\nimport deepEqual from \"fast-deep-equal\";\nimport {\n  Bundle as BundleInterface,\n  StablercMatch,\n  BundleTaskParams,\n  LoadedConfigs,\n  LoadedPlugins,\n  StablercPlugin,\n} from \"../interfaces\";\nimport { CliArgKey } from \"../enums\";\nimport { loadModule } from \"./loadModule\";\nimport { bundleFromFiles } from \"./task/BundleTask/bundleFromFiles\";\nimport { codeForPlugins } from \"./task/BundleTask/codeForPlugins\";\nimport { instantiatePlugin } from \"./stablerc/instantiatePlugin\";\nimport { codeForTestBundle } from \"./task/BundleTask/codeForTestBundle\";\nimport { bundlerAliasForRunner } from \"./bundlerAliasForRunner\";\nimport { thunkify } from \"./task/BundleTask/thunkify\";\nimport { verboseWarn } from \"./verboseWarn\";\nimport { readTripleSlashDirectives } from \"./readTripleSlashDirectives\";\n\nexport class Bundle implements BundleInterface {\n  static async fromConfigs(\n    configs,\n    params: BundleTaskParams,\n  ): Promise<Map<string, Bundle>> {\n    const {\n      [CliArgKey.RUNNER]: runner,\n      [CliArgKey.FORCE]: forceRunner = false,\n    } = params;\n    const bundles = new Map<string, Bundle>();\n    const bundleForRunner = runner => {\n      if (bundles.has(runner)) {\n        return bundles.get(runner);\n      }\n\n      const bundle = new Bundle({\n        ...params,\n        runner,\n      });\n\n      bundles.set(runner, bundle);\n      return bundle;\n    };\n\n    for (const { config, files } of configs.values()) {\n      const filtered = [];\n\n      for (const file of files) {\n        let overriddenLocally = false;\n\n        for await (const { runner: r } of readTripleSlashDirectives(file)) {\n          if (params.runner == null || params.runner === r) {\n            bundleForRunner(r).addMatch({ config, files: [file] });\n          }\n          overriddenLocally = true;\n        }\n        if (!overriddenLocally) {\n          filtered.push(file);\n        }\n      }\n      const { runners } = config.document;\n\n      for (const r of runner == null\n        ? runners\n        : runners.includes(runner) || forceRunner === true\n        ? [runner]\n        : []) {\n        bundleForRunner(r).addMatch({ config, files: filtered });\n      }\n    }\n    return bundles;\n  }\n\n  runner: string;\n\n  shouldInstrument: boolean;\n\n  verbose: boolean;\n\n  rollupConfig: string;\n\n  rollupPromise: Promise<any>;\n\n  rollupPlugins: Promise<any[]>;\n\n  cwd: string;\n\n  onready: string;\n\n  matches: Set<StablercMatch>;\n\n  constructor({\n    [CliArgKey.RUNNER]: runner,\n    [CliArgKey.COVERAGE]: shouldInstrument = false,\n    [CliArgKey.VERBOSE]: verbose = false,\n    [CliArgKey.ROLLUP]: rollupConfig = \"rollup.config.js\",\n    [CliArgKey.WORKING_DIRECTORY]: cwd = process.cwd(),\n    [CliArgKey.ONREADY]: onready = \"run\",\n  }: BundleTaskParams) {\n    this.runner = runner;\n    this.shouldInstrument = !!shouldInstrument;\n    this.verbose = verbose;\n    this.rollupConfig = rollupConfig;\n    this.cwd = cwd;\n    this.rollupPromise = loadModule(join(cwd, this.rollupConfig));\n    this.rollupPlugins = this.rollupPromise.then(config => config.plugins);\n    this.onready = onready;\n    this.matches = new Set<StablercMatch>();\n  }\n\n  addMatch(match: StablercMatch): Bundle {\n    this.matches.add(match);\n    return this;\n  }\n\n  async loadConfigs(pluginConfigs: [string, any][][]): Promise<LoadedConfigs> {\n    const seen = new Map<string, Set<any>>();\n    const configs = pluginConfigs.flatMap(matchPlugins =>\n      matchPlugins.map(matchPlugin => {\n        const [pluginName] = matchPlugin;\n\n        if (!seen.has(pluginName)) {\n          seen.set(pluginName, new Set<any>());\n        }\n\n        const matchedPreviously = seen.get(pluginName);\n\n        for (const dup of matchedPreviously) {\n          if (deepEqual(matchPlugin, dup)) {\n            return dup;\n          }\n        }\n        matchedPreviously.add(matchPlugin);\n        return matchPlugin;\n      }),\n    );\n\n    return {\n      seen,\n      configs,\n    };\n  }\n\n  async loadPlugins(pluginConfigs: [string, any][][]): Promise<LoadedPlugins> {\n    const { seen, configs } = await this.loadConfigs(pluginConfigs);\n\n    return {\n      seen,\n      configs,\n      plugins: new Map<any, Promise<any>>(\n        [...seen.entries()].flatMap(([pluginName, configs]) =>\n          [...configs].map(config => [\n            config,\n            instantiatePlugin(pluginName, config[1]),\n          ]),\n        ),\n      ),\n    };\n  }\n\n  async rollup(): Promise<RollupBuild> {\n    const { shouldInstrument, verbose, onready, runner } = this;\n    const rollupPlugins = await this.rollupPlugins;\n    const matchValues = [...this.matches.values()];\n    const pluginsPromise = this.loadPlugins(\n      matchValues.map(({ config }) => config.document.plugins),\n    );\n    const testBundlePromises: Promise<RollupBuild>[] = matchValues.map(\n      ({ files }) =>\n        this.rollupSpecfiles({\n          files,\n          shouldInstrument,\n          verbose,\n          rollupPlugins,\n          pluginsPromise,\n        }),\n    );\n    const [pluginModules, testBundles, tmp] = await Promise.all([\n      this.awaitPlugins(pluginsPromise),\n      Promise.all(testBundlePromises),\n      dir({ unsafeCleanup: true }),\n    ]);\n\n    try {\n      const specialRunner = bundlerAliasForRunner(this.runner);\n      const firstPhase = [\n        copy(join(__dirname, \"dist/framework.js\"), join(tmp.path, \"stable.js\")),\n        specialRunner != null &&\n          copy(\n            join(__dirname, `dist/runners/${specialRunner}.js`),\n            join(tmp.path, \"run.js\"),\n          ),\n      ];\n\n      const matches = [...this.matches];\n\n      for (const [index, { config }] of matches.entries()) {\n        const pluginBundle = new Set<StablercPlugin>();\n\n        for (const pluginConfig of config.document.plugins) {\n          canonicalize: for (const c of pluginModules.configs) {\n            if (!deepEqual(pluginConfig, c)) {\n              continue canonicalize;\n            }\n            pluginBundle.add(await pluginModules.plugins.get(c));\n          }\n        }\n        firstPhase.push(\n          writeFile(\n            join(tmp.path, `plugins-${index}.js`),\n            codeForPlugins([...pluginBundle]),\n            \"utf-8\",\n          ),\n          testBundles[index].write({\n            file: join(tmp.path, `bundle-${index}.js`),\n            format: \"esm\",\n            sourcemap: \"inline\",\n          }),\n        );\n      }\n\n      const testBundle = codeForTestBundle(\n        bundlerAliasForRunner(runner) ? undefined : onready,\n        this.matches.size,\n        specialRunner,\n      );\n      const testBundlePath = join(tmp.path, \"index.js\");\n\n      firstPhase.push(writeFile(testBundlePath, testBundle, \"utf-8\"));\n\n      await Promise.all(firstPhase);\n\n      return await rollup({\n        input: testBundlePath,\n        onwarn: verbose ? verboseWarn : () => {},\n        plugins: [\n          thunkify({\n            files: [...matches.keys()].map(i =>\n              join(tmp.path, `bundle-${i}.js`),\n            ),\n          }),\n        ],\n      });\n    } finally {\n      tmp.cleanup();\n    }\n  }\n\n  async rollupSpecfiles(params): Promise<RollupBuild> {\n    return bundleFromFiles(params);\n  }\n\n  async awaitPlugins(\n    pluginsPromise: Promise<LoadedPlugins>,\n  ): Promise<LoadedPlugins> {\n    return pluginsPromise\n      .then(({ plugins }) => Promise.all(plugins.values()))\n      .then(() => pluginsPromise);\n  }\n}\n","import { Message } from \"../../../types\";\n\nexport function skipped(report: Message): boolean {\n  return \"skipped\" in report && !report.skipped;\n}\n","import { readFile } from \"fs-extra\";\nimport { tmpName } from \"tmp-promise\";\nimport { Task, RunTaskParams, Report } from \"../../../interfaces\";\nimport { implForRunner } from \"./implForRunner\";\nimport { transformForFormat } from \"../../output/transformForFormat\";\nimport { CliArgKey, StreamFormat } from \"../../../enums\";\nimport { stablercsForParams } from \"../../stablerc/stablercsForParams\";\nimport { writeBundle } from \"../BundleTask/writeBundle\";\nimport { formatForRunner } from \"./formatForRunner\";\nimport { Bundle } from \"../../Bundle\";\nimport { of } from \"most\";\nimport { skipped } from \"./skipped\";\n\nexport class RunTask implements Task {\n  async run(params) {\n    const {\n      [CliArgKey.QUIET]: quiet,\n      [CliArgKey.OUTPUT_FORMAT]: format = StreamFormat.TAP,\n      [CliArgKey.BUNDLE_FILE]: outFileParam,\n      [CliArgKey.HIDE_SKIPS]: hideSkips = \"focus\",\n      [CliArgKey.FAIL_FAST]: failFast = true,\n    }: RunTaskParams = params;\n    const bundles = await Bundle.fromConfigs(await stablercsForParams(params), {\n      ...params,\n      [CliArgKey.ONREADY]: \"stableRun\",\n    });\n    let failed = false;\n\n    for (const [runner, bundle] of bundles) {\n      const outFile = outFileParam != null ? outFileParam : await tmpName();\n\n      const b = await bundle.rollup();\n\n      await writeBundle(b, outFile, {\n        ...params,\n        [CliArgKey.BUNDLE_FORMAT]: formatForRunner(runner),\n      });\n\n      const code = await readFile(outFile, \"utf-8\");\n      const run = implForRunner(runner);\n      const transform = transformForFormat(format);\n\n      await run(code, { ...params, runner })\n        .filter(report => {\n          switch (hideSkips) {\n            case true:\n              return !skipped(report);\n            case \"focus\": {\n              return !skipped(report) || !report.suite.isFocusMode;\n            }\n          }\n        })\n        .recoverWith(reason =>\n          of({\n            description: \"recovered with reason\",\n            ok: false,\n            reason,\n          } as Report),\n        )\n        .tap(report => {\n          if (report.ok === false) {\n            failed = true;\n          }\n        })\n        .map(transform)\n        .observe(console.log); // eslint-disable-line\n\n      if (failed && failFast) {\n        break;\n      }\n    }\n\n    if (failed && !quiet) {\n      process.exit(1); // 👋\n    }\n  }\n}\n","import { Task, BundleTaskParams } from \"../../../interfaces\";\nimport { writeBundle } from \"./writeBundle\";\nimport { stablercsForParams } from \"../../stablerc/stablercsForParams\";\nimport { CliArgKey } from \"../../../enums\";\nimport { Bundle } from \"../../Bundle\";\nimport { formatForRunner } from \"../RunTask/formatForRunner\";\nimport { kebab } from \"../../case/kebab\";\nimport { join, dirname, basename } from \"path\";\n\nexport class BundleTask implements Task {\n  async run(params: BundleTaskParams) {\n    const { [CliArgKey.BUNDLE_FILE]: outFile = \"static/bundle.js\" } = params;\n    const configs = await stablercsForParams(params);\n    const bundles = await Bundle.fromConfigs(configs, params);\n\n    for (const [runner, bundle] of bundles) {\n      const b = await bundle.rollup();\n\n      const outFileForRunner = `${join(\n        dirname(outFile),\n        basename(outFile, \".js\"),\n      )}-${kebab(runner)}.js`;\n\n      await writeBundle(b, outFileForRunner, {\n        ...params,\n        [CliArgKey.BUNDLE_FORMAT]: formatForRunner(runner),\n      });\n    }\n  }\n}\n","export function uniq<T>(array: T[]): T[] {\n  return [...new Set<T>(array)] as T[];\n}\n","import { join, isAbsolute, dirname } from \"path\";\nimport chalk from \"chalk\";\nimport { highlight } from \"cli-highlight\";\nimport { safeDump } from \"js-yaml\";\nimport { Stats } from \"fs\";\nimport {\n  Task,\n  PrintConfigTaskParams,\n  LogEffect,\n  StablercMatch,\n} from \"../../interfaces\";\nimport { uniq } from \"../uniq\";\nimport { stat } from \"fs-extra\";\nimport { ConfigOutputFormat } from \"../../enums\";\nimport { nearestStablerc } from \"../stablerc/nearestStablerc\";\nimport { stablercsForParams } from \"../stablerc/stablercsForParams\";\n\nclass Run {\n  private entries: string[];\n\n  private resolved: string[];\n\n  private stablercFiles: Promise<string[]>;\n\n  private stablercs: Promise<Map<string, StablercMatch>>;\n\n  private verbose: boolean;\n\n  private format: string;\n\n  private log: LogEffect;\n\n  constructor(params: PrintConfigTaskParams) {\n    const {\n      \"output-format\": format = ConfigOutputFormat.YAML,\n      \"working-directory\": cwd = process.cwd(),\n      rest: entries,\n      verbose,\n      log = console.log, // eslint-disable-line\n    } = params;\n    this.entries = entries.length === 0 ? [\".\"] : entries;\n    this.resolved = this.entries.map(entry =>\n      isAbsolute(entry) ? entry : join(cwd, entry),\n    );\n    this.stablercFiles = this.computeStablercFiles();\n    this.stablercs = stablercsForParams(params); //this.computeStablercs();\n    this.verbose = verbose;\n    this.format = format;\n    this.log = log;\n  }\n\n  dump(document) {\n    switch (this.format) {\n      case ConfigOutputFormat.YAML:\n        return highlight(safeDump(document), {\n          language: \"yaml\",\n        });\n      case ConfigOutputFormat.JSON:\n        return highlight(JSON.stringify(document, null, 2), {\n          language: \"json\",\n        });\n      case ConfigOutputFormat.INSPECT:\n        return document;\n    }\n    throw new TypeError(`unknown format: ${this.format}`);\n  }\n\n  async go() {\n    if (this.verbose) {\n      this.log(`${chalk.bold(\"entries:\")} ${this.entries}`);\n      this.log(`${chalk.bold(\"resolved:\")} ${this.resolved}`);\n      this.log(`${chalk.bold(\"stablerc files:\")} ${await this.stablercFiles}`);\n      this.log(`${chalk.bold(\"stablercs:\")}`, await this.stablercs);\n      this.log(`${chalk.bold(\"output format:\")} ${this.format}`);\n    }\n\n    this.log(this.dump(this.dumpMap(await this.stablercs)));\n  }\n\n  private async computeStablercFiles(): Promise<string[]> {\n    return Promise.all(\n      uniq(await directoriesFor(this.resolved)).map((dir: string) =>\n        nearestStablerc(dir),\n      ),\n    );\n  }\n\n  private dumpMap(spec) {\n    return [...spec.entries()].map(\n      ([\n        filename,\n        {\n          config: { document: config },\n          files,\n        },\n      ]) => ({\n        filename,\n        config,\n        files,\n      }),\n    );\n  }\n}\n\nasync function directoriesFor(files) {\n  return (await Promise.all(\n    files.map(async filename => ({\n      filename,\n      stats: await stat(filename),\n    })),\n  )).map(({ filename, stats }: { stats: Stats; filename: string }) =>\n    stats.isDirectory() ? filename : dirname(filename),\n  );\n}\n\nexport class PrintConfigTask implements Task {\n  async run(params: PrintConfigTaskParams): Promise<void> {\n    await new Run(params).go();\n  }\n}\n","import chalk from \"chalk\";\nimport { Task, Menu, Command } from \"../../interfaces\";\n\nexport class PrintHelpMenuTask implements Task {\n  private static printCommands(commands) {\n    const values = [...commands.values()];\n\n    return values\n      .map(\n        ({ name, emoji, help }) => `${emoji} ${chalk.cyan(name)}\\n\\n${help}\\n`,\n      )\n      .join(\"\\n\");\n  }\n\n  private static printOption(name, short) {\n    return [short != null && `-${short}`, `--${name}`]\n      .filter(Boolean)\n      .join(\", \");\n  }\n\n  private static printOptions(options) {\n    const values = [...options.values()];\n    const definitions = values.map(({ name, short }) =>\n      PrintHelpMenuTask.printOption(name, short),\n    );\n    const max = definitions\n      .map(it => it.length)\n      .reduce((a, b) => Math.max(a, b), 0);\n\n    return values\n      .map(\n        ({ help, type, default: defaultValue }, index) =>\n          `${chalk.blue(definitions[index].padEnd(max))}\\t${help} ${chalk.green(\n            `[${type}]`,\n          )}${\n            defaultValue != null\n              ? chalk.green(` [default: ${defaultValue}]`)\n              : \"\"\n          }`,\n      )\n      .join(\"\\n\");\n  }\n\n  run(options: any, command: Command, menu: Menu): void {\n    /* eslint-disable no-console */\n    console.log(`Usage: ${chalk.bold(\"stable\")} ${chalk.green(\n      `<${[...menu.commands.keys()].join(\" \")}> <file(s)/dir(s)> [options]`,\n    )}\n\n${PrintHelpMenuTask.printCommands(menu.commands)}\nOptions:\n\n${PrintHelpMenuTask.printOptions(menu.options)}\n`);\n    /* eslint-enable no-console */\n  }\n}\n","import { cli } from \"./cli\";\nimport { Task } from \"../interfaces\";\nimport { RunTask } from \"./task/RunTask\";\nimport { BundleTask } from \"./task/BundleTask\";\nimport { PrintConfigTask } from \"./task/PrintConfigTask\";\nimport { PrintHelpMenuTask } from \"./task/PrintHelpMenuTask\";\nimport { CliCommandKey } from \"../enums\";\n\n/* eslint-disable no-console */\nmain();\n\nasync function main() {\n  try {\n    await cli.runFromArgv(\n      process.argv,\n      new Map<string, Task>([\n        [CliCommandKey.RUN, new RunTask()],\n        [CliCommandKey.BUNDLE, new BundleTask()],\n        [CliCommandKey.CONFIG, new PrintConfigTask()],\n        [CliCommandKey.HELP, new PrintHelpMenuTask()],\n        [\n          CliCommandKey.PARSE_OPTIONS,\n          {\n            run(options) {\n              console.log(options);\n            },\n          },\n        ],\n      ]),\n    );\n  } catch (reason) {\n    console.error(reason);\n    process.exit(reason.code || 1); // 👋\n  }\n}\n/* eslint-enable no-console */\n"],"names":["SimpleCommand","of","fromAsyncIterable","fromEvent","run","runLocal","createServer","WebSocketServer","spawn","runRemote","JSDOM","evalRunner","chromeRunner","jsdomRunner","inspect","join","stat","dirname","load","rollup","isAbsolute","glob","createFilter","readFile","safeLoad","SimpleStablercFile","loadAll","path","resolve","basename","createReadStream","dir","copy","writeFile","tmpName","highlight","safeDump"],"mappings":"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"}